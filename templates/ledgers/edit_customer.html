{% extends 'base.html' %}
{% load static %}{% load perms %}
{% block extracss %}

{% endblock extracss %}
{% block content %}
<div class="row">
    <div class="col-md-12 m-b-30">
        <div class="d-block d-sm-flex flex-nowrap align-items-center">
            <div class="page-title mb-2 mb-sm-0">
                <h1>Customer: Edit</h1>
            </div>
            <div class="ml-auto d-flex align-items-center">
                <nav>
                    <ol class="breadcrumb p-0 m-b-0">
                        <li class="breadcrumb-item"> <a href="{% url 'dash:home' %}"><i class="ti ti-home"></i></a> </li>
                        <li class="breadcrumb-item"> Masters </li>
                        <li class="breadcrumb-item" aria-current="page"> <a href="{% url 'ledgers:ledgers' %}"> Registration </a> </li>
                        <li class="breadcrumb-item" aria-current="page"> <a href="{% url 'ledgers:cm' %}"> Customer </a> </li>
                        <li class="breadcrumb-item active text-primary" aria-current="page"> <a href="">Edit Customer </a> </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <form method="POST" action="{% url 'ledgers:editcm' cm.pk %}" onsubmit="return validate()">
                    {% csrf_token %}
                    <div class="modal fade" id="gstModal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="verticalCenterTitle">Address</h4>
                                </div>
                                <div class="modal-body p-4">
                                    <section class="accordion">
                                        <section class="accordion-tabs" style="overflow-x: auto;">
                                            {% for i in addresses %}
                                                <button type="button" class="accordion-tab" data-actab-group="0" data-actab-id="{{ forloop.counter }}">{{i.address_type}}</button>
                                            {% endfor %}
                                        </section>
                                        <section class="accordion-content">
                                            {% for i in addresses %}
                                            <article class="accordion-item" data-actab-group="0" data-actab-id="{{ forloop.counter }}">
                                                <h4 class="accordion-item__label">Address</h4>
                                                <div class="accordion-item__container">
                                                    <div class="table-responsive">
                                                        <table class="table table-borderless mb-0" id="table" data-excel-name="Basic">
                                                            <div id="multiaddress" class="row">
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="address_type1" class="form-label">Address Type<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="address_type1" name="address_type1" value="{{i.address_type|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="mailing_name1" class="form-label"> Mailling Name<span style="color:red">*</span> </label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="mailing_name1" name="mailing_name1" value="{{i.mailing_name|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_addressline11" class="form-label"> Address Line1<span style="color:red">*</span> </label>
                                                                        <input type="text" class="form-control" id="pcd_addressline11" name="pcd_addressline11" value="{{i.addressline1|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_addressline21" class="form-label"> Address Line2<span style="color:red">*</span> </label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="pcd_addressline21" name="pcd_addressline21" value="{{i.addressline2|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_addressline31" class="form-label"> Address Line3<span style="color:red">*</span> </label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="pcd_addressline31" name="pcd_addressline31" value="{{i.addressline3|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <label for="countryoptions1" class="form-label">Country<span style="color:red">*</span></label>
                                                                    <div>
                                                                        <select class="form-control" id="countryoptions1" name="pcd_country">
                                                                            {% for country in countries %}
                                                                                {% if country == i.country %}
                                                                                <option value="{{ country.pk }}" selected>
                                                                                    {{ country.name }}
                                                                                </option>
                                                                            {% else %}
                                                                                <option value="{{ country.pk }}">
                                                                                    {{ country.name }}
                                                                                </option>
                                                                            {% endif %}
                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <!-- end col -->
                                                                <div class="col-lg-4">
                                                                    <label for="stateoptions1" class="form-label">State<span style="color:red">*</span></label>
                                                                    <div>
                                                                        <select class="form-control" id="stateoptions1" name="pcd_state">
                                                                            <option value="{{ i.state.pk }}" selected>{{ i.state }} </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <!-- end col -->
                                                                <div class="col-lg-4">
                                                                    <label for="cityoptions1" class="form-label">City<span style="color:red">*</span></label>
                                                                    <div>
                                                                        <select class="form-control" id="cityoptions1" name="pcd_city">
                                                                            <option value="{{ i.city.pk }}" selected>{{ i.city }} </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <!-- end col -->
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_pincode1" class="form-label">Pincode<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="text" class="form-control" value="{{i.pin_code|default_if_none:'0'}}" id="pcd_pincode1" name="pcd_pincode">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_contact_person1" class="form-label">
                                                                            Contact Person<span style="color:red">*</span>
                                                                        </label>
                                                                        <input autocomplete="off" type="text"
                                                                                class="form-control"
                                                                                id="pcd_contact_person1" value="{{i.contact_person|default_if_none:'0'}}"
                                                                                name="pcd_contact_person1">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_phone_no1" class="form-label">Phone no<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="text"
                                                                                class="form-control"
                                                                                id="pcd_phone_no1"
                                                                                value="{{i.phone_no|default_if_none:'0'}}"
                                                                                name="pcd_phone_no">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_mobile_no1" class="form-label">Mobile No<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="text"
                                                                                class="form-control"
                                                                                id="pcd_mobile_no1"
                                                                                name="pcd_mobile_no" value="{{i.mobile_no|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_fax_no1" class="form-label">Fax No</label>
                                                                        <input autocomplete="off" type="text"
                                                                                class="form-control"
                                                                                id="pcd_fax_no1"
                                                                                value="{{i.fax_no|default_if_none:'0'}}"
                                                                                name="pcd_fax_no">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_email_id1" class="form-label">Email<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="email"
                                                                                class="form-control"
                                                                                id="pcd_email_id1" value="{{i.email_id|default_if_none:'0'}}"
                                                                                name="pcd_email_id">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="pcd_pan_no1" class="form-label">PAN No<span style="color:red">*</span></label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="pcd_pan_no1" name="pcd_pan_no" value="{{i.pan_no|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-4">
                                                                    <label for="gst_registration_type1" class="form-label">
                                                                        Registration
                                                                        Type<span style="color:red">*</span>
                                                                    </label>
                                                                    <div>
                                                                        <select class="form-control" name="pcd_gst_registration_type1">
                                                                            <option value="{{ i.gst_registration_type }}">{{ i.gst_registration_type }}
                                                                            </option>
                                                                            <option value="Unknown">
                                                                                Unknown
                                                                            </option>
                                                                            <option value="Composition">
                                                                                Composition
                                                                            </option>
                                                                            <option value="Consumer">
                                                                                Consumer
                                                                            </option>
                                                                            <option value="Regular">
                                                                                Regular
                                                                            </option>
                                                                            <option value="Unregistered">
                                                                                Unregistered
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="mb-3">
                                                                        <label for="gstin1" class="form-label">GSTIN</label>
                                                                        <input autocomplete="off" type="text" class="form-control" id="gstin1" name="pcd_gstin" value="{{i.gstin|default_if_none:'0'}}">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </table>
                                                    </div>
                                                </div>
                                            </article>
                                            {% endfor %}
                                        </section>
                                    </section>

                                    <button type="button"
                                            class="btn btn-success"
                                            hx-get="{% url 'ledgers:cmmultiadd' %}"
                                            hx-swap="outerHTML"
                                            hx-vals='{"no": 1}'>
                                        <i class="uil uil-ban">Add More Address</i>
                                    </button>
                                </div>
                                    <div class="modal-footer d-flex justify-content-between align-items-center border ">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">Save and Close</span>
                                        </button>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-xl-8">
                            <div class="mb-3 row">
                                <label for="customer_name" class="col-md-2 col-form-label">Customer Name<span style="color:red">*</span></label>
                                <div class="col-md-10">
                                    <input class="form-control" type="text" id="customer_name" name="customer_name" value="{{cm.name}}" required/>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row mb-3">
                                <div class="col-lg-4 d-flex align-items-center">
                                    <label for="vendor_code" class="form-label m-0"> Customer Code </label>
                                </div>
                                <div class="col-lg-8">
                                    <input type="text" class="form-control" value="{{cm.vendor_code}}" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-lg-4">
                            <div class="row mb-3">
                                <div class="col-lg-4 d-flex align-items-center">
                                    <label for="vendor_code" class="form-label mb-0"> Division<span style="color:red">*</span></label>
                                </div>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" name="divisions" required >
                                        {% for i in divisions %}
                                            {% if cm.devision == i %}
                                            <option value="{{cm.devision.pk}}" selected> {{cm.devision}} </option>
                                            {% else %}
                                            <option value="{{i.pk}}"> {{ i.name }} </option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row mb-3 md-6">
                                <div class="col-lg-4 d-flex align-items-center">
                                    <label for="party_type" class="form-label m-0">
                                        Party Type<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" name="party_type" required>
                                        <option value="{{ cm.party_type.pk }}">{{ cm.party_type}}
                                        </option>
                                        {% for i in party_types %}
                                            <option value="{{i.pk}}">
                                                {{ i.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row mb-3 md-6">
                                <div class="col-lg-4 d-flex align-items-center">
                                    <label for="party_type" class="form-label m-0"> Party Margin<span style="color:red">*</span></label>
                                </div>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" name="pricelevel" required>
                                        <option value="{{cm.price_level.pk}}"> {{cm.price_level}} </option>
                                        {% for i in pricelevels %}
                                            <option value="{{i.pk}}"> {{ i.name }} </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-xl-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="dafault_credit_period" class="col-form-label m-0"> Default Credit Period(Days):<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input class="form-control" type="number" step="0" name="dafault_credit_period" id="dafault_credit_period" value="{{cm.dafault_credit_period}}" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4">
                            <div class="mb-3 mx-0 py-2 row form-check form-switch form-switch-md">
                                <input autocomplete="off" class="form-check-input" type="checkbox" id="check_credit_days" name="check_credit_days" checked required>
                                <label for="check_credit_days" class="form-check-label">Check Credit Days<span style="color:red">*</span></label>
                            </div>
                        </div>
                        <div class="col-xl-4">
                            <div class="mb-3 mx-0 py-2 row form-check form-switch form-switch-md">
                                <input autocomplete="off" class="form-check-input" type="checkbox" id="tcs" name="tcs" {% if cm.istcsapplicable %} checked {% endif %}>
                                <label for="tcs" class="form-check-label">Tcs Applicable?<span style="color:red">*</span></label>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="payment_terms" class="form-label m-0">Payment Terms<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input type="text" class="form-control" id="payment_terms" name="payment_terms" value="{{cm.payment_terms}}" required>
                                </div>
                            </div>
                        </div>
                        <!-- end col -->
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="credit_limit" class="form-label m-0">Credit Limit</label>
                                </div>
                                <div class="col-md-8">
                                    <input type="number" step="0" class="form-control" id="credit_limit" name="credit_limit" value="{{cm.credit_limit}}">
                                </div>
                            </div>
                        </div>
                        <!-- end col -->
                        <div class="col-lg-4">
                            <div class="mb-3 mx-0 py-2 row form-check form-switch form-switch-md">
                                <input class="form-check-input" id="override_credit_limit" type="checkbox" name="override_credit_limit" {% if cm.override_credit_limit %} checked {% endif %}>
                                <label for="override_credit_limit" class="form-check-label">Override Credit Limit</label>
                            </div>
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-xl-4 col-md-4 col-sm-12">
                            <div class="row mb-3 d-flex align-items-center">
                                <div class="col-xl-4 col-md-6 col-sm-12">
                                    <label for="zone" class="col-form-label mb-0 p-0">Zone<span style="color:red">*</span></label>
                                </div>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" id="zoneoptions" name="zone" required>
                                        <option value="{{ cm.zone.pk }}">{{ cm.zone }}</option>
                                        {% for i in zones %}
                                            <option value="{{ i.pk }}">
                                                {{ i.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4 col-md-4 col-sm-12">
                            <div class="row mb-3 d-flex align-items-center">
                                <label for="region" class="col-sm-4 col-xl-4 col-form-label">Region<span style="color:red">*</span></label>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" id="regionoptions" name="region" required>
                                        <option value="{{ cm.region.pk }}">{{ cm.region }}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <!-- end col -->
                        <div class="col-xl-4 col-md-6 col-sm-12">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 col-sm-12 d-flex align-items-center">
                                    <label for="zsm_name" class="col-form-label mb-0 p-0">
                                        ZSM<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="zsmoptions" name="zsm" required>
                                        <option value="{{ cm.zsm.pk }}">{{ cm.zsm }}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <!-- end col -->
                        <div class="col-xl-4">
                            <div class="row mb-3">
                                <div class="col-xl-4 col-sm-4 d-flex align-items-center">
                                    <label for="zsm_name" class="col-form-label mb-0 p-0">
                                        RSM<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="rsmoptions" name="rsm" required>
                                        <option value="{{ cm.rsm.pk }}">{{ cm.rsm }}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <div class="col-xl-4">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 d-flex align-items-center">
                                    <label for="asm_name" class="col-form-label mb-0 p-0">
                                        ASM<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="asmoptions" name="asm" required>
                                        <option value="{{ cm.asm.pk }}">{{ cm.asm }}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <!-- end col -->
                        <div class="col-xl-4">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 d-flex align-items-center">
                                    <label for="se_name" class="col-form-label mb-0 p-0">
                                        SE<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="seoptions" name="se" required>
                                        <option value="{{ cm.se.pk }}">{{ cm.se }}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                    </div>
                    <div class="row mx-0">
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="addressline1" class="form-label">
                                    Address Line1<span style="color:red">*</span></label>
                                <input type="text" required
                                        class="form-control"
                                        id="addressline1" value="{{cm.addressline1}}"
                                        name="addressline1">
                            </div>
                        </div>
                        <!-- end col -->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="addressline2" class="form-label">
                                    Address Line2<span style="color:red">*</span></label>
                                <input type="text" required
                                        class="form-control" value="{{cm.addressline2}}"
                                        id="addressline2"
                                        name="addressline2">
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="addressline3" class="form-label">
                                    Address Line3<span style="color:red">*</span></label>
                                <input type="text" required
                                        class="form-control" value="{{cm.addressline3}}"
                                        id="addressline3"
                                        name="addressline3">
                            </div>
                        </div>

                        <div class="col-xl-4">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 d-flex align-items-center">
                                    <label for="countryoptions" class="col-form-label mb-0 p-0">
                                        Country<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="countryoptions" name="country" required>
                                    <option value="{{ cm.country.pk }}">{{ cm.country }}</option>
                                    {% for country in countries %}
                                        {% if country.name == i.country %}
                                            <option value="{{ country.pk }}" selected>
                                                {{ country.name }}
                                            </option>
                                        {% else %}
                                            <option value="{{ country.pk }}">
                                                {{ country.name }}
                                            </option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <div class="col-xl-4">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 d-flex align-items-center">
                                    <label for="stateoptions" class="col-form-label mb-0 p-0">
                                        State<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="stateoptions" name="state" required>
                                        <option value="{{ cm.state.pk }}">{{ cm.state }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <div class="col-xl-4">
                            <div class="row mb-3 md-6">
                                <div class="col-xl-4 d-flex align-items-center">
                                    <label for="cityoptions" class="col-form-label mb-0 p-0">
                                        City<span style="color:red">*</span>
                                    </label>
                                </div>
                                <div class="col-sm-6 col-xl-8">
                                    <select class="form-control" id="cityoptions" name="city" required>
                                        <option value="{{ cm.city.pk }}">{{ cm.city }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <!-- end row -->
                        </div>
                        <!-- end col -->
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="pin_code" class="form-label m-0">Pincode<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input autocomplete="off" type="tel" step="0" class="form-control" id="pin_code" pattern="[0-9]{6}" name="pin_code" required value="{{ cm.pin_code|default_if_none:''}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="mobile_no" class="form-label m-0">Mobile<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input autocomplete="off" type="tel" step="0" class="form-control" id="mobile_no" pattern="[0-9]{10}" name="mobile_no" required value="{{ cm.mobile_no|default_if_none:''}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="pan_no" class="form-label m-0">PAN No<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input autocomplete="off" type="text" class="form-control" id="pan_no" name="pan_no" required value="{{ cm.pan_no|default_if_none:''}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="row mb-3">
                                <div class="col-lg-4 d-flex align-items-center">
                                    <label for="vendor_code" class="form-label mb-0" > Registration Type<span style="color:red">*</span></label>
                                </div>
                                <div class="col-xl-8 col-md-6 col-sm-12">
                                    <select class="form-control" id="registration_types" name="registration_type" required>
                                    <option value="{{ cm.gst_registration_type }}">{{ cm.gst_registration_type}}
                                    </option>
                                    <option value="Unknown">
                                        Unknown
                                    </option>
                                    <option value="Composition">
                                        Composition
                                    </option>
                                    <option value="Consumer">
                                        Consumer
                                    </option>
                                    <option value="Regular">
                                        Regular
                                    </option>
                                    <option value="Unregistered">
                                        Unregistered
                                    </option>
                                </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="mb-3 row">
                                <div class="col-md-4 d-flex align-items-center">
                                    <label for="gstin" class="form-label m-0">GSTIN<span style="color:red">*</span></label>
                                </div>
                                <div class="col-md-8">
                                    <input autocomplete="off" type="text" class="form-control" id="gstin" name="gstin" {% if cm.gst_registration_type == 'Composition' or  cm.gst_registration_type == 'Regular' %}required {% endif %} value="{{ cm.gstin|default_if_none:''}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row mx-0">
                        <div class="col-lg-2 d-flex align-items-start mb-3">

                            <label class="form-check-label bold" for="provide_contact_details">
                                Contact Details
                            </label>

                        </div>
                        <div class="col-xl-10" id="contactdetails">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="contact_person" class="form-label">
                                            Name
                                        </label>
                                        <input type="text"
                                                class="form-control"
                                                id="contact_person"
                                                name="contact_person" value="{{ cm.contact_person|default_if_none:''}}">
                                    </div>
                                </div>
                                <!-- end col -->
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="phone_no" class="form-label">
                                            Phone no
                                        </label>
                                        <input type="text" class="form-control" id="phone_no" value="{{ cm.phone_no|default_if_none:''}}" name="phone_no">
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="fax_no" class="form-label">
                                            Fax No
                                        </label>
                                        <input type="text" class="form-control" id="fax_no" name="fax_no" value="{{ cm.fax_no|default_if_none:'' }}">
                                    </div>
                                </div>
                                <!-- end col -->
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="email_id" class="form-label">
                                            Email Id (To)<span style="color:red">*</span>
                                        </label>
                                        <input type="email" class="form-control" id="email_id" name="email_id" required  value="{{ cm.email_id|default_if_none:'' }}">
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="cc_email" class="form-label">
                                            Email Id (cc)
                                        </label>
                                        <input type="text" class="form-control" id="cc_email" name="cc_email" value="{{ cm.cc_email|default_if_none:'' }}">
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="mb-3">
                                        <label for="website" class="form-label">
                                            website
                                        </label>
                                        <input type="text" class="form-control" id="website" name="website" value="{{ cm.website|default_if_none:'' }}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end col -->
                    </div>
                    <div class="row mx-0">
                        <div class="col-xl-4">
                            <div class="row form-check form-switch form-switch-md ">
                            <input class="form-check-input" type="checkbox" id="multiple_address_list" data-toggle="modal" data-target="#gstModal" name="mailing_details">
                            <label class="form-check-label" for="multiple_address_list"> Set/alter multiple mailing details </label>
                           </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row mx-0">
                        <div class="col-lg-2 d-flex align-items-start mb-3">
                            <label class="form-check-label" for="provide_contact_details">
                                Bank Details
                            </label>
                        </div>
                        <div class="col-xl-10" id="bankdetails">
                            <div class="row">


                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="transation_types" class="form-label"> Transaction Type </label>
                                    <input type="text"
                                            class="form-control"
                                            id="transation_types" value="{{ cm.transation_type|default_if_none:'' }}"
                                            name="transation_type">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="bank" class="form-label">
                                        Bank Name
                                    </label>
                                    <input type="text" class="form-control" id="bank" name="bank" value="{{ cm.bank|default_if_none:'' }}">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="ifsc_code" class="form-label">
                                        IFSC CODE
                                    </label>
                                    <input type="text" class="form-control" id="ifsc_code" value="{{ cm.ifsc_code|default_if_none:'' }}" name="ifsc_code">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="account_no" class="form-label">
                                        Account Number
                                    </label>
                                    <input type="text" class="form-control" id="account_no" value="{{ cm.account_no|default_if_none:'' }}" name="account_no">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-3">
                                    <label for="account_name" class="form-label">
                                        Account Name
                                    </label>
                                    <input type="text"
                                            class="form-control"
                                            id="account_name" value="{{ cm.account_name|default_if_none:'' }}"
                                            name="account_name">
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    <input type="submit"  class="btn btn-primary w-sm ms-auto" style="float: right;" value="Submit">
                </form>
            </div>
        </div>
    </div>

{% endblock %}
{% block scripts %}
    <script>
    // State
    $("#countryoptions").change(function () {
        var countryId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_states' %}",
            data: {
                'country': countryId
            },
            success: function (data) {
                $("#stateoptions").html(
                    data);
            }
        });

    });

    // City
    $("#stateoptions").change(function () {
        var stateId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_cities' %}",
            data: {
                'state': stateId
            },
            success: function (data) {
                $("#cityoptions").html(
                    data);
            }
        });

    });
    //multi address
    $("#countryoptions1").change(function () {
        var countryId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_states' %}",
            data: {
                'country': countryId
            },
            success: function (data) {
                $("#stateoptions1").html(
                    data);
            }
        });

    });

    $("#stateoptions1").change(function () {
        var stateId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_cities' %}",
            data: {
                'state': stateId
            },
            success: function (data) {
                $("#cityoptions1").html(
                    data);
            }
        });

    });

    //region
    $("#zoneoptions").change(function () {
        var regionId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_zones' %}",
            data: {
                'region': regionId
            },
            success: function (data) {
                $("#regionoptions").html(
                    data);
            }
        });

    });

    //zsm
    $("#regionoptions").change(function () {
        var zoneId = $("#zoneoptions").val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_zsms' %}",
            data: {
                'zone': zoneId
            },
            success: function (data) {
                $("#zsmoptions").html(
                    data);
            }
        });

    });

    //rsm
    $("#zsmoptions").change(function () {
        var zoneId = $("#zoneoptions").val();
        var regionId = $("#regionoptions").val();
        var zsmId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_rsms' %}",
            data: {
                'zone': zoneId,
                'region': regionId,
                'zsm': zsmId
            },
            success: function (data) {
                $("#rsmoptions").html(
                    data);
            }
        });

    });

    //asm
    $("#rsmoptions").change(function () {
        var zoneId = $("#zoneoptions").val();
        var regionId = $("#regionoptions").val();
        var zsmId = $("#zsmoptions").val();
        var rsmId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_asms' %}",
            data: {
                'zone': zoneId,
                'region': regionId,
                'zsm': zsmId,
                'rsm': rsmId
            },
            success: function (data) {
                $("#asmoptions").html(
                    data);
            }
        });

    });
    //se
    $("#asmoptions").change(function () {
        var zoneId = $("#zoneoptions").val();
        var regionId = $("#regionoptions").val();
        var zsmId = $("#zsmoptions").val();
        var rsmId = $("#rsmoptions").val();
        var asmId = $(this).val();

        $.ajax({
            url: "{% url 'ledgers:ajax_load_ses' %}",
            data: {
                'zone': zoneId,
                'region': regionId,
                'zsm': zsmId,
                'rsm': rsmId,
                'asm': asmId
            },
            success: function (data) {
                $("#seoptions").html(
                    data);
            }
        });

    });

    $("#registration_types").change(function (){
        if($(this).val() == 'Regular' | $(this).val() == 'Composition'){
            document.getElementById("gstin").setAttribute("required","true");
        }
        else{
            document.getElementById("gstin").removeAttribute("required");
        }
    })
    </script>

    <script type="text/javascript">
    const labels = document.querySelectorAll(".accordion-item__label");
    const tabs = document.querySelectorAll(".accordion-tab");

    function toggleShow() {
        const target = this;
        const item = target.classList.contains("accordion-tab")
            ? target
            : target.parentElement;
        const group = item.dataset.actabGroup;
        const id = item.dataset.actabId;

        tabs.forEach(function(tab) {
            if (tab.dataset.actabGroup === group) {
                if (tab.dataset.actabId === id) {
                    tab.classList.add("accordion-active");
                } else {
                    tab.classList.remove("accordion-active");
                }
            }
        });

        labels.forEach(function(label) {
            const tabItem = label.parentElement;

            if (tabItem.dataset.actabGroup === group) {
                if (tabItem.dataset.actabId === id) {
                    tabItem.classList.add("accordion-active");
                } else {
                    tabItem.classList.remove("accordion-active");
                }
            }
        });
    }

    labels.forEach(function(label) {
        label.addEventListener("click", toggleShow);
    });

    tabs.forEach(function(tab) {
        tab.addEventListener("click", toggleShow);
    });
    </script>
{% endblock %}
